<!-- start custom head snippets -->

<!-- 기본 스타일시트 -->
<link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">

<!-- favicon (브라우저 탭 아이콘) -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">

<!-- 구글 폰트 -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

<!-- Lunr.js 검색 스크립트 -->
<script src="{{ '/assets/js/lunr/lunr.min.js' | relative_url }}"></script>

<!-- 검색 데이터 로더 (항상 로드) -->
<script src="{{ '/assets/js/lunr/lunr-store-static.js' | relative_url }}"></script>

<!-- 언어 감지 및 적절한 언어 스크립트 로드 -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // 현재 언어 감지
        var lang = document.documentElement.getAttribute('lang') || 'ko';
        var scriptPath = '';

        // 언어에 따른 스크립트 경로 설정
        if (lang === 'ko') {
            scriptPath = "{{ '/assets/js/lunr/lunr-ko.js' | relative_url }}";
        } else {
            scriptPath = "{{ '/assets/js/lunr/lunr-en.js' | relative_url }}";
        }

        // 캐시 버스팅을 위한 타임스탬프 추가
        scriptPath += '?v=' + new Date().getTime();

        // 스크립트 동적 로드
        var script = document.createElement('script');
        script.src = scriptPath;
        script.async = true;
        script.onerror = function () {
            console.error('검색 스크립트 로드 실패:', scriptPath);
            // 오류 메시지 표시
            var searchError = document.getElementById('search-error');
            if (searchError) {
                searchError.style.display = 'block';
                searchError.textContent = '검색 기능을 초기화할 수 없습니다.';
            }
        };
        document.head.appendChild(script);

        console.log('검색 스크립트 로드:', scriptPath);
    });
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id={{ site.analytics.google.tracking_id }}"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', '{{ site.analytics.google.tracking_id }}');
</script>

<!-- end custom head snippets -->

<!-- 글로벌 스크립트 - 페이지 로드 전에 실행됨 -->
<script src="{{ '/assets/js/global.js' | relative_url }}"></script>