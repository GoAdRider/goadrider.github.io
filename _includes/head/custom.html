<!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- Google fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Roboto:wght@400;500;700&display=swap"
    rel="stylesheet">

<!-- Custom styles -->
<link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/assets/css/search.css' | relative_url }}">

<!-- Lunr.js 검색 라이브러리 - 비동기적으로 로드 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.9/lunr.min.js" defer></script>

<!-- 검색 스토어 데이터 로드 -->
<script src="{{ '/assets/js/lunr/lunr-store.js' | relative_url }}" defer></script>

<!-- 언어별 검색 스크립트 비동기 로드 -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        function loadSearchScript() {
            var lang = document.documentElement.getAttribute('lang') || 'ko';
            var scriptUrl = lang === 'ko' ?
                "{{ '/assets/js/lunr/lunr-ko.js' | relative_url }}" :
                "{{ '/assets/js/lunr/lunr-en.js' | relative_url }}";

            // 이전 스크립트 제거
            var oldScript = document.getElementById('lunr-lang-script');
            if (oldScript) {
                oldScript.remove();
            }

            // 새 스크립트 로드
            var script = document.createElement('script');
            script.id = 'lunr-lang-script';
            script.src = scriptUrl;
            script.defer = true;
            document.head.appendChild(script);
        }

        // 초기 로드
        loadSearchScript();

        // 언어 변경 감지
        document.addEventListener('languageChanged', loadSearchScript);
    });
</script>

<!-- end custom head snippets -->

<!-- 글로벌 스크립트 - 페이지 로드 전에 실행됨 -->
<script src="{{ '/assets/js/global.js' | relative_url }}"></script>