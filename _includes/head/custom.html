<!-- start custom head snippets -->

<!-- Google Font 로드 -->
{% if site.lang == "ko" or page.lang == "ko" %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
{% endif %}

<!-- 검색 기능 스크립트 로드 -->
{% if site.search == true %}
<script src="{{ '/assets/js/lunr/lunr.min.js' | relative_url }}"></script>
<script src="{{ '/assets/js/lunr/lunr-store-static.js' | relative_url }}"></script>
<script>
    // 페이지 언어에 따라 다른 검색 스크립트 로드
    document.addEventListener('DOMContentLoaded', function () {
        function loadSearchScript(lang) {
            // 이전에 로드된 스크립트 제거
            var oldScript = document.getElementById('lunr-script');
            if (oldScript) {
                oldScript.remove();
            }

            // 새 스크립트 생성 및 로드
            var script = document.createElement('script');
            script.id = 'lunr-script';
            script.src = "{{ '/assets/js/lunr/lunr-' | relative_url }}" + lang + ".js";
            script.async = true;
            document.body.appendChild(script);
        }

        // 초기 언어 감지
        var lang = document.documentElement.lang || 'en';
        loadSearchScript(lang == 'ko' ? 'ko' : 'en');

        // 언어 변경 감지
        document.addEventListener('languageChanged', function (e) {
            loadSearchScript(e.detail.language == 'ko' ? 'ko' : 'en');
        });
    });
</script>
{% endif %}

<!-- Google Analytics -->
{% if jekyll.environment == 'production' and site.analytics.provider and page.analytics != false %}
{% include analytics.html %}
{% endif %}

<!-- Favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">

<!-- end custom head snippets -->

<!-- 글로벌 스크립트 - 페이지 로드 전에 실행됨 -->
<script src="{{ '/assets/js/global.js' | relative_url }}"></script>