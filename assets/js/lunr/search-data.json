---
layout: null
---
{
    {% assign docs = site.documents | where_exp:'doc','doc.search != false' %
    }
  {% assign pages = site.html_pages | where_exp:'doc','doc.search != false' %
    }
  
  {% assign collections = docs | map: 'collection' | uniq %
    }
  {% assign entries = '' | split: '' %
    }
  
  {% for collection in collections %
    }
    {% assign docs_collection = docs | where: 'collection', collection %
    }
    {% for doc in docs_collection %
    }
      {% assign entries = entries | push: doc %
    }
    {% endfor %
    }
  {% endfor %
    }
  
  {% assign entries = entries | concat: pages %
    }
  
  "items": [
        {% for entry in entries %
        }
    {
            "title": {
                { entry.title | jsonify
                }
            },
            "excerpt": {
                { entry.excerpt | strip_html | truncatewords: 50 | jsonify
                }
            },
            "categories": {
                { entry.categories | jsonify
                }
            },
            "tags": {
                { entry.tags | jsonify
                }
            },
            "url": {
                { entry.url | absolute_url | jsonify
                }
            },
            {% if entry.header.teaser %
            }
        "teaser": {
                { entry.header.teaser | absolute_url | jsonify
                }
            }
      {% else %
            }
        "teaser": null
      {% endif %
            }
        }{% unless forloop.last %
        },
        {% endunless %
        }
  {% endfor %
        }
  
  {% assign posts = site.posts | where_exp:'post','post.search != false' %
        }
  {% for post in posts %
        }
    {% unless entries contains post %
        },
        {
            "title": {
                { post.title | jsonify
                }
            },
            "excerpt": {
                { post.excerpt | strip_html | truncatewords: 50 | jsonify
                }
            },
            "categories": {
                { post.categories | jsonify
                }
            },
            "tags": {
                { post.tags | jsonify
                }
            },
            "url": {
                { post.url | absolute_url | jsonify
                }
            },
            {% if post.header.teaser %
            }
        "teaser": {
                { post.header.teaser | absolute_url | jsonify
                }
            }
      {% else %
            }
        "teaser": null
      {% endif %
            }
        }
    {% endunless %
        }
  {% endfor %
        }
    ]
}